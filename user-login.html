<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Job Seeker Login - AI Hiring Platform</title>
  <link rel="stylesheet" href="global.css">
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar">
    <div class="navbar-content">
      <a href="landing.html" class="navbar-brand">AI Hiring</a>
      <ul class="navbar-nav">
        <li><a href="company-login.html" class="navbar-link">Company Login</a></li>
      </ul>
    </div>
  </nav>

  <!-- Login Form -->
  <section class="py-5">
    <div class="container-small">
      <div class="card">
        <div class="card-header">
          <h2 class="card-title">Job Seeker Login</h2>
        </div>
        <div class="card-body">
          <!-- Error message container (hidden by default) -->
          <div id="errorMessage" class="alert alert-error hidden"></div>

          <form id="loginForm">
            <div class="form-group">
              <label for="email" class="form-label">Email Address</label>
              <input 
                type="email" 
                id="email" 
                name="email" 
                class="form-input" 
                placeholder="your.email@example.com"
                required
              >
            </div>

            <div class="form-group">
              <label for="password" class="form-label">Password</label>
              <input 
                type="password" 
                id="password" 
                name="password" 
                class="form-input" 
                placeholder="Enter your password"
                required
              >
            </div>

            <button type="submit" class="btn btn-primary btn-block btn-large">
              Login
            </button>
          </form>

          <div class="divider"></div>

          <p class="text-center text-muted">
            Don't have an account? 
            <a href="user-signup.html">Sign up here</a>
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <p class="footer-text">&copy; 2024 AI Hiring Platform. All rights reserved.</p>
      <ul class="footer-links">
        <li><a href="privacy.html" class="footer-link">Privacy Policy</a></li>
      </ul>
    </div>
  </footer>

  <script>
    // JWT Login Handler
    // This will send credentials to backend and store JWT token
    document.getElementById('loginForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      const errorDiv = document.getElementById('errorMessage');
      
      // Hide previous errors
      errorDiv.classList.add('hidden');
      
      try {
        // TODO: Replace with actual backend endpoint
        const response = await fetch('/api/auth/user/login', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({ email, password }),
        });
        
        const data = await response.json();
        
        if (response.ok && data.token) {
          // Store JWT token in localStorage
          localStorage.setItem('userToken', data.token);
          localStorage.setItem('userType', 'jobseeker');
          
          // Redirect to user dashboard
          window.location.href = 'user-dashboard.html';
        } else {
          // Show error message
          errorDiv.textContent = data.message || 'Login failed. Please check your credentials.';
          errorDiv.classList.remove('hidden');
        }
      } catch (error) {
        console.error('Login error:', error);
        errorDiv.textContent = 'An error occurred. Please try again.';
        errorDiv.classList.remove('hidden');
      }
    });
  </script>
</body>
</html>
